#cloud-config
package_update: true
packages:
  - nginx
write_files:
  - path: /var/www/html/index.html
    permissions: '0644'
    owner: root:root
    content: |
      <!doctype html>
      <html>
        <head><meta charset="utf-8"><title>Terraform Azure Demo</title></head>
        <body style="font-family: sans-serif;">
          <h1>It works ðŸŽ‰</h1>
          <p>This VM was provisioned by Terraform and configured by cloud-init.</p>
          <img src="https://miro.medium.com/v2/resize:fit:640/format:webp/0*2-Eyak8AllUybGAN" alt="IaC Meme" />
        </body>
      </html>
runcmd:
  - systemctl enable nginx
  - systemctl restart nginx
